<ion-header>
  <app-header header="Report"></app-header>
</ion-header>

<ion-content>
  <ion-card class="no-shadow">
  <form [formGroup]="addReport">
  <div class="form-group">
    <!-- <ion-item>
      <ion-label>Select Date Range:</ion-label>
    </ion-item> -->
    <ion-item class="border">
      <ion-input
        class="required-asterisk"
        placeholder="Pick Start Date" 
        value="{{ addReport.value.fromdate  | date: 'dd-MM-YYYY' }}"
        id="fromdate">
      </ion-input>
      <ion-popover trigger="fromdate" size="cover">
      <ng-template>
        <ion-datetime
          presentation="fromdate"
          formControlName="fromdate">
        </ion-datetime>
      </ng-template>
      </ion-popover>
      <ion-icon name="calendar-outline" slot="end"></ion-icon>
    </ion-item>
  </div>
  <div class="form-group">
    <ion-item class="border">
      <ion-input 
        placeholder="Pick End Date"
        class="required-asterisk"
        value="{{ addReport.value.todate  | date: 'dd-MM-YYYY' }}"
        id="todate">
      </ion-input>
      <ion-popover trigger="todate" size="cover">
        <ng-template>
          <ion-datetime
            presentation="todate"
            formControlName="todate">
          </ion-datetime>
        </ng-template>
        </ion-popover>
        <ion-icon name="calendar-outline" slot="end"></ion-icon>
    </ion-item> 
  </div>
    <ion-item class="border">
      <ion-label>Assignee</ion-label>
      <ion-select formControlName="taskassignee">
        <ion-select-option *ngFor="let item of users;let i = index" [value]="item.userid">{{item.fullname}}
        </ion-select-option>
      </ion-select>
    </ion-item>
    <ion-item class="border">
      <ion-label>Status</ion-label>
      <ion-select formControlName="status">
        <ion-select-option *ngFor="let iem of status" [value]="iem.value">{{iem.key}}
        </ion-select-option>
      </ion-select>
    </ion-item>
    <ion-item class="border">
      <ion-label>Report Type</ion-label>
      <ion-select class="required-asterisk" formControlName="reporttypecode">
        <ion-select-option *ngFor="let itm of report;let i = index" [value]="itm.reporttypecode">{{itm.reporttypename}}
        </ion-select-option>
      </ion-select>
    </ion-item>
    <ion-footer>
      <ion-row no-padding>
         <ion-col center text-center>
            <ion-button [disabled]="addReport.invalid"  type="submit" expand="block" color="primary" (click)="onReportData()">Show Report</ion-button>
          </ion-col>
      </ion-row>
    </ion-footer>
      <ion-card *ngFor="let item of reportData; let i = index">
        <ion-card-header>
          Task # {{item.taskid}}
        </ion-card-header>
        <ion-card-content>
          <p><ion-icon name="calendar-outline"></ion-icon> Task Date : <span>{{item.taskdate | date:'mediumDate'}}</span></p>
          <p><ion-icon name="person-outline"></ion-icon> Customer Name : <span>{{item.customername}}</span></p>
          <p><ion-icon name="location-outline"></ion-icon> Location : <span>{{item.location}}</span></p>
          <p><ion-icon name="call-outline"></ion-icon> Phone : <span>{{item.phone}}</span></p>
          <p><ion-icon
            name="ellipse"  [color]="item.status=='in progress'?'warning':item.status=='open'?'light':item.status=='resolved'?'success':item.status=='customer pending'?'medium':'secondary'"></ion-icon>Status : <span>{{item.status}}</span></p>
        </ion-card-content>
      </ion-card>
  </form>
</ion-card>
</ion-content>

